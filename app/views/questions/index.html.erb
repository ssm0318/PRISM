
<%= render "questions/layout", questions: @questions %>

<script>
    $(".btn-write-modal").on('click', function() {
      
      form = $(this)
      $.ajax({
        type: "GET",
        url: form.attr('data-url'),
        success: function(data) {

          var html = $(`${data.html_content}`)

          $("#edit-background").find("#edit-box").append(html)
          $("#edit-background").show()
          $("body").css('overflow', 'hidden')
          textarea_init($(html.find('textarea')), $("#edit-background"))

          //편집 exit 버튼
          $("#btn-edit-exit").on('click', function() {
            html.remove()
            $("#edit-background").hide()
            $("body").css('overflow', 'auto')
          })
          
          //편집 완료
          $(".new_answer").submit( function(e) {
            e.preventDefault()

            form = $(this)
            console.log(form)
            $.ajax({
              type: "POST",
              url: form.attr('action'),
              data: form.serialize(),
              success: function(data) {
                console.log("successed")
                  html.remove()
                  $("#edit-background").hide()
                  $("body").css('overflow', 'auto')
              },
              error: function(data) {
                  console.log("error!")
              }
            })
          })
        },
        error: function(data) {
            console.log("error!")
        }
      })
      
    })

</script>