<div class="inner-container">
    <div class="prism-title"><h1>Question Feed</h1></div>
    <div class = "question">

        <div class = "question-content"><%= @question.content %>
            <% if Drawer.where(user_id: current_user.id, target: @question).empty? %>
                <%= link_to image_tag("icons/drawer-default-icon", class: "btn-drawer"), drawers_path(target_id: @question.id, target_type: "Question"), method: :post %>
            <% else %>
                <%= link_to image_tag("icons/drawer-on-icon", class: "btn-drawer"), drawer_path(@question.id, target_type: "Question"), method: :delete, data: {confirm: '이 글을 서랍장에서 꺼내시겠습니까?'} %>
            <% end %>
        </div>
    </div>

    <% @question.answers.reverse_each do |answer| %>
        <div class="prism-box">
            <div class="prism-box__header">
                <%= render partial: "./user_profile", locals: {user: answer.author} %><br/>
            </div>
            <div class="prism-box__content">
                <br>
                <a href="/questions/<%=answer.question.id%>" class="question"><%= answer.question.content %></a> <br><br>
                <div class="answer"><%= answer.content %></div>
                <%# 여기도. 이런 코드를 view에서 쓰는 게 맞는지 %>
                <%
=begin%>
 <br>
                태그:
                <% if !a.tag_string.nil? %>
                    <%= a.tag_string.gsub("\r\n", "\n").split("\n") %>
                <% end %> 
<%
=end%>
                <br>
                <div class = "date"><%= time_tag answer.updated_at, class: "timeago" %></div>
                <br>
            </div>
            <div class="prism-box__footer" style="padding-bottom: 10px;">
                
                <%# if Star.where(user_id: current_user.id, target: a.question).empty? %>
                    <%#= link_to "<i class='material-icons'>star_border</i>".html_safe, stars_path(target_id: a.question.id, target_type: "Question"), method: :post %>
                <%# else %>
                    <%#= link_to "<i class='material-icons'>star</i>".html_safe, star_path(a.question.id, target_type: "Question"), method: :delete %>
                <%# end %>
                <%# if Star.where(user_id: current_user.id, target: a).empty? %>
                    <%#= link_to "<i class='material-icons'>star_border</i>".html_safe, stars_path(target_id: a.id, target_type: "Answer"), method: :post %>
                <%# else %>
                    <%#= link_to "<i class='material-icons'>star</i>".html_safe, star_path(a.id, target_type: "Answer"), method: :delete %>
                <%# end %>
                
                <%= render '/answers/authorized_answer', a: answer %>
                <%= render '/answers/like', a: answer, target_type: "Answer", like_btn_class: "btn-answer-like"%>
                <%= render '/answers/drawer', a: answer %>
                <br>

                
                <br>

            
            </div>
        </div>
    <% end %>
</div>

<!--한 사람은 질문 하나에 답변 여러 개 할 수 있는 건가..?!
        일단은 하나만 있다고 가정하고 만듦-->

<%= render 'layouts/timestamp' %>