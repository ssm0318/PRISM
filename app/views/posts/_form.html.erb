<div id = "new-post-form">
    <%= form_for post do |f| %>
        <%= f.hidden_field :author_id, :value => current_user.id %>
        <%= f.text_area :content, class: "new-answer-field", required: true, autofocus: true, placeholder: "나는 지금", "data-enable-grammarly": "false" %>
        <!-- FIXME: answer쓰는 form에도 이거 넣어주기 -->
       
        <!-- FIXME: checkbox가 /posts/form과 왜때무네 연동되는 것? -->
        <div class = "channels channels-post">
            <span class="channels-dropdown hover-orange">공개그룹</span>
            <%= link_to image_tag("icons/setting-default-icon.png", class: "channel-setting-icon"), friends_path()%>
            <!-- TODO: 채널이 많아질 경우 style -->
            <div class="channels-dropdown-content">
                <span class="btn-select-all-channels">전체선택</span>
                <% if post.id != nil %>
                    <%# edit post의 경우 %>
                    <% label_id = "post_edit" %>
                <% else %>
                    <%# create post의 경우 %>
                    <% label_id = "post" %>
                <% end %>
                <% current_user.channels.each do |channel| %>
                    <%= check_box_tag "c[]", channel.id, 
                        post.channels.count() > 0 ? post.channels.include?(channel) : !(channel.name=="익명피드" || channel.name=="나"),
                        id: channel.id.to_s + label_id, class: "channel-el" %>
                    <%= label_tag channel.id.to_s + label_id, channel.name, class: "channel-el" %>
                <% end %>
            </div>
        </div>
        <%= f.submit "저장", class: "answer-button"%>
    <% end %>
</div>

